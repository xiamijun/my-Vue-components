webpackJsonp([1],{EJaP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),l=i.n(s),a={props:{id:{type:String,default:""},options:{type:Array,default:function(){return[]}},supportSearch:{type:Boolean,default:!1},emptyData:{type:Boolean,default:!1},noOptionData:{type:String,default:"暂无数据"},placeholderText:{type:String,default:"请选择"}},data:function(){return{selectBoxId:"",selectInputVal:"",selectedObj:{},infoList:[],isFirst:!0,isHide:!0,isHover:!1,choiceText:"请选择",optionAllData:[]}},mounted:function(){this.handleArrFun(this.id),document.addEventListener("click",this.listenHideFun,!1),this.$refs.selectList.addEventListener("mousewheel",this.stopScroll),this.$refs.selectList.addEventListener("DOMMouseScroll",this.stopScroll)},watch:{selectInputVal:{handler:function(e,t){if(this.supportSearch){if(this.infoList=this.options.filter(function(t){return t.name.includes(e)}),this.selectInputVal===this.selectedObj.name)return}else this.isHide=!0},deep:!0},options:function(e,t){if(e&&(this.isFirst=!0),this.isFirst){this.infoList=e,this.optionAllData=e,e.length||(this.selectInputVal=this.choiceText="请选择");var i=e.length,s=t.length,l=i>=s?s:i;if(t.length)for(var a=0;a<l;a++)e[a].id!=t[a].id&&(this.selectInputVal=this.choiceText="请选择")}},supportSearch:function(e,t){this.supportSearch=e},emptyData:function(e,t){e?this.handleArrFun(""):this.handleArrFun(this.id)}},methods:{selectInputValFocus:function(e,t){this.infoList=this.options,e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},handleArrFun:function(e){var t=this;setTimeout(function(){t.optionAllData&&t.optionAllData.forEach(function(i,s){if(i.id==e){if(t.optionAllData[s].isChoice=!0,"全部"==i.name)return;t.setCurrentSelectedItem(i.id,i.name)}else t.optionAllData[s].isChoice=!1;t.$set(t.optionAllData,s,t.optionAllData[s])})})},selectdItemEvent:function(e,t){e||this.setCurrentSelectedItem(e,t),this.handleArrFun(e),this.supportSearch?this.isHide=!0:this.isHide=!1,this.$emit("emptyDataFalse")},setCurrentSelectedItem:function(e,t){this.selectInputVal=t||this.selectInputVal,this.choiceText=this.selectInputVal,this.selectedObj={id:e,name:t},void 0!=e&&void 0!=t&&this.$emit("selected",this.selectedObj)},selectOperationFun:function(e){this.isHide=!this.isHide,this.isFirst=!1,e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},listenHideFun:function(e){!1===this.isHide&&(~~e.target.parentNode.id||~~e.target.parentNode.parentNode.id)!==~~this.selectBoxId&&(this.isHide=!0)},stopScroll:function(e){var t=this.$refs.selectList,i=t.scrollTop,s=t.scrollHeight,l=t.clientHeight,a=e.wheelDelta?e.wheelDelta:-(e.detail||0);(a>0&&i<=a||a<0&&s-l-i<=-1*a)&&(t.scrollTop=a>0?0:s,e&&e.preventDefault?(e.stopPropagation(),e.preventDefault()):(e.canselBubble=!0,window.event.returnValue=!1))}},created:function(){this.infoList=this.options,this.optionAllData=this.options,this.selectBoxId=parseInt(1e5*Math.random())},beforeDestroy:function(){document.removeEventListener("click",this.listenHideFun),this.$refs.selectList.removeEventListener("mousewheel",this.stopScroll),this.$refs.selectList.removeEventListener("DOMMouseScroll",this.stopScroll)}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"selectBox",attrs:{id:e.selectBoxId}},[i("div",{staticClass:"selectChoice",class:e.isHide?"":"hover",on:{click:e.selectOperationFun}},[e.supportSearch?i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectInputVal,expression:"selectInputVal"}],class:["selectInput",{choiceTextCss:"请选择"==e.choiceText||"全部"==e.choiceText}],attrs:{type:"text",placeholder:e.placeholderText},domProps:{value:e.selectInputVal},on:{focus:e.selectInputValFocus,input:function(t){t.target.composing||(e.selectInputVal=t.target.value)}}}):e._e(),e._v(" "),e.supportSearch?e._e():i("p",{class:["selectText",{choiceTextCss:"请选择"==e.choiceText||"全部"==e.choiceText}]},[e._v(e._s(e.choiceText))]),e._v(" "),i("Icon",{staticClass:"iconStyle",class:e.isHide?"selected":"",attrs:{type:"arrow-up-b"}})],1),e._v(" "),e.supportSearch?i("div",{ref:"selectList",staticClass:"selectList",class:e.isFirst?"":e.isHide?"heightZero":"heightOrigin"},[e._l(e.infoList,function(t){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.infoList.length>0,expression:"infoList.length>0"}],key:t.id,staticClass:"selectOption",class:t.isChoice?"selected":"",attrs:{value:t.id,title:t.name},on:{click:function(i){e.selectdItemEvent(t.id,t.name)}}},[e._v(e._s(t.name))])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.infoList.length,expression:"infoList.length==0"}],staticClass:"selectOption",domProps:{textContent:e._s(this.noOptionData)},on:{click:function(t){e.isHide=!0}}})],2):e._e(),e._v(" "),e.supportSearch?e._e():i("div",{ref:"selectList",staticClass:"selectList",class:e.isFirst?"":e.isHide?"heightZero":"heightOrigin"},[e._l(e.optionAllData,function(t){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.optionAllData.length>0,expression:"optionAllData.length>0"}],key:t.id,staticClass:"selectOption",class:t.isChoice?"selected":"",attrs:{value:t.id,title:t.name},on:{click:function(i){e.selectdItemEvent(t.id,t.name)}}},[e._v(e._s(t.name))])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.optionAllData.length,expression:"optionAllData.length==0"}],staticClass:"selectOption",domProps:{textContent:e._s(this.noOptionData)},on:{click:function(t){e.isHide=!0}}})],2)])},staticRenderFns:[]};var n=i("VU/8")(a,c,!1,function(e){i("Zqhn")},"data-v-1fd1105a",null).exports,r={name:"checkBoxItem",props:{checkModel:{type:Boolean,default:!0},isChecked:{type:Boolean,default:!1}},data:function(){return{}},computed:{checkedStatus:function(){return this.isChecked}},methods:{selectTableCurrent:function(){this.$emit("selectCurrentTableItem")}}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:{checkBox:!0,isRadio:!this.checkModel,checked:this.checkedStatus},on:{click:this.selectTableCurrent}})},staticRenderFns:[]};var h=i("VU/8")(r,o,!1,function(e){i("FwKZ")},"data-v-05d56877",null).exports,d={name:"selectUser",props:{value:{type:Boolean,default:!1},checkType:{type:Boolean,default:!0},title:{type:String,default:"批量添加人员"}},data:function(){return{showModel:!1,stripe:!0,selected:[],teacherFilter:{selectAllChecked:!1,selectAllTableChecked:!1,selectData:[],sexList:[{value:"男",label:"男"},{value:"女",label:"女"}],filterRequirement:{sex:"",name:"",jzgno:""},dataList:[],columns4:[{title:" ",width:60,render:this.teacherRenderFun},{title:"姓名",key:"name",render:this.publicRenderEllipsisFun},{title:"工号",key:"jzgno",render:this.publicRenderEllipsisFun},{title:"职务",key:"zw",render:this.publicRenderEllipsisFun},{title:"职称",key:"zc",render:this.publicRenderEllipsisFun},{title:"在职状态",key:"zgqk",render:this.publicRenderEllipsisFun}]}}},watch:{value:function(e,t){this.showModel=e,e&&(this.teacherFilter.filterRequirement={},this.handleClickChoiceCondition())},showModel:function(e,t){if(this.$emit("input",e),e&&(this.handleDataClear(),this.handleClickClear(),this.handleClickClearList()),e){this.handleClickClear();var i=-1;i<0&&(i=0)}}},components:{tSelect:n},methods:{handleDataClear:function(){this.handleClickClearList(),this.selected=[]},handleClickClear:function(){for(var e in this.teacherFilter.filterRequirement)this.teacherFilter.filterRequirement[e]=""},teacherRenderFun:function(e,t){var i=this;return e(h,{props:{checkModel:this.checkType,isChecked:this.checkType&&t.row.selected||!this.checkType&&this.selected.length&&this.selected[0].id==t.row.id},on:{selectCurrentTableItem:function(e){if(t.row.selected=!t.row.selected,t.row.selected)i.teacherFilter.selectData.push(t.row),i.selectUserFun(i.teacherFilter.selectData,t.row);else{var s=i.teacherFilter.selectData.indexOf(t.row);s>=0&&i.teacherFilter.selectData.splice(s,1),i.cancelSelectTeacherUserFun(i.teacherFilter.selectData,t.row)}}}})},publicRenderEllipsisFun:function(e,t){var i="";return"name"===t.column.key?i=t.row.name:"jzgno"===t.column.key&&(i=t.row.jzgno),this.publicEllipsisFun(e,t,i)},publicEllipsisFun:function(e,t,i){return e("Tooltip",{props:{placement:t.index>15?"bottom-start":"top-start",delay:500}},[e("div",{slot:"content",style:{whiteSpace:"normal"},domProps:{innerHTML:i}}),e("div",{style:{wordBreak:"keep-all",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},domProps:{innerHTML:i}})])},handleClickClearList:function(){for(var e=this.selected.length-1;e>=0;)this.handleClickDelSelList(this.selected[e],e,!0),e=this.selected.length-1;this.teacherFilter.selectAllTableChecked=!1},handleCheckAll:function(){},handleCheckedAllResult:function(){var e=this;if(0===this.teacherFilter.dataList.length)this.$Message.warning("没有任何信息,无法选中");else{if(this.teacherFilter.selectAllChecked)return void this.handleClickClearList();this.$get(this.ME.teacherList,{},function(t){var i=t.data.datalist;e.teacherFilter.selectAllChecked=!e.teacherFilter.selectAllChecked,e.selected=i,e.teacherSelectAllClickFun(),e.teacherFilter.selectAllChecked||e.handleClickClearList(),i instanceof Array&&i.forEach(function(t,i){var s=e.checkArrayItem(e.selected,"id",t.id);t.selected=s>=0})})}},handleClickChoiceCondition:function(){var e=this;this.teacherFilter.choiceTeacherData=[],this.$get(this.ME.teacherList,{},function(t){var i=t.data.datalist;i instanceof Array?(i.forEach(function(t,i){var s=e.checkArrayItem(e.selected,"id",t.id);t.selected=s>=0}),e.teacherFilter.dataList=i):e.teacherFilter.dataList=[]})},handleClickDelSelList:function(e,t,i){var s=-1;return this.teacherFilter.selectAllChecked=!1,(s=this.checkArrayItem(this.teacherFilter.dataList,"id",e.id))>=0?(s=this.cancelSelectTeacherUserFun(this.teacherFilter.selectData,this.teacherFilter.dataList[s]),!0):(this.selected.splice(t,1),!1)},checkArrayItem:function(e,t,i){var s=-1;return e.forEach(function(e,l){if(String(e[t])==String(i))return s=l,!1}),s},cancelSelectTeacherUserFun:function(e,t){t.selected=!1;var i=this.checkArrayItem(this.selected,"id",t.id);i>=0&&this.selected.splice(i,1),(i=this.checkArrayItem(e,"id",t.id))>=0&&(e[i].selected=!1),this.teacherFilter.selectAllChecked=!1,this.teacherFilter.selectAllTableChecked=!1},selectUserFun:function(e,t){var i=this;if(t.selected=!0,this.checkType){a=JSON.parse(l()(t));this.checkArrayItem(this.selected,"id",t.id)<0&&this.selected.push(a);var s=0!=this.selected.length;this.teacherFilter.dataList.forEach(function(e,t){if(i.checkArrayItem(i.selected,"id",e.id)<0)return s=!1,!1}),this.teacherFilter.selectAllTableChecked=s}else{this.handleClickClearList();var a=JSON.parse(l()(t));this.selected.unshift(a)}},changePage:function(e){this.loadTeacherInfo(e)},teacherSelectAllClickFun:function(e){var t=this,i=this.selectAllTeacherFun(e);this.teacherFilter.selectData=i?this.teacherFilter.dataList:[],this.teacherFilter.dataList.forEach(function(e,s){i?t.selectUserFun(t.teacherFilter.selectData,e):t.cancelSelectTeacherUserFun(t.teacherFilter.selectData,e)})},selectAllTeacherFun:function(e){return this.teacherFilter.selectAllTableChecked=!this.teacherFilter.selectAllTableChecked,this.teacherFilter.selectAllTableChecked},ok:function(){var e={close:!0,filterTeacherData:JSON.parse(l()(this.teacherFilter.filterRequirement))};this.$emit("ok",JSON.parse(l()(this.selected)),e),e.close&&this.$emit("input",!1)},cancel:function(){this.handleClickClear(),this.$emit("cancel"),this.showModel=!1},loadTeacherInfo:function(e){var t=this;this.$get(this.ME.teacherList,{},function(e){var i=e.data.datalist;if(i instanceof Array?(i.forEach(function(e,i){var s=t.checkArrayItem(t.selected,"id",e.id);e.selected=s>=0}),t.teacherFilter.dataList=i):t.teacherFilter.dataList=[],!t.teacherFilter.selectAllChecked){var s=0;t.selected.forEach(function(e,i){t.teacherFilter.dataList.forEach(function(i,l){e.id===i.id&&s++,t.teacherFilter.selectAllTableChecked=10===s})})}})},forEachChild:function(e,t){var i=this;e.$children instanceof Array&&e.$children.length&&e.$children.forEach(function(e){t(e),i.forEachChild(e,t)})}},updated:function(){if(this.$parent){var e=[];for(var t in this.$parent.$el.attributes){var i=this.$parent.$el.attributes[t].name;"string"==typeof i&&"data-v"===i.substring(0,6)&&e.push(i)}e.push("data-v-0c1cc1e3"),e.length&&this.forEachChild(this,function(t){e.forEach(function(e){t.$el.setAttribute(e,"")})})}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Modal",{directives:[{name:"scoped",rawName:"v-scoped"}],staticClass:"vertical-center-modal selectUserFrame",attrs:{"mask-closable":!1,title:e.title,width:e.checkType?1e3:790},on:{"on-cancel":e.cancel},model:{value:e.showModel,callback:function(t){e.showModel=t},expression:"showModel"}},[i("div",{class:["content",{radioModel:e.checkType}]},[i("div",{staticClass:"tabContent"},[i("div",{staticClass:"tabListContent"},[i("div",{staticClass:"filterRequirementContent"},[i("div",{staticClass:"filterRequirement",style:{height:e.checkType?"423px":"385px"}},[i("div",{staticClass:"filterOrganization"},[i("h4",{staticClass:"publicTitle"},[e._v("性别:")]),e._v(" "),i("Select",{staticClass:"cssPublicSelect",attrs:{placeholder:"全部"},model:{value:e.teacherFilter.filterRequirement.sex,callback:function(t){e.$set(e.teacherFilter.filterRequirement,"sex",t)},expression:"teacherFilter.filterRequirement.sex"}},e._l(e.teacherFilter.sexList,function(t){return i("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),i("div",{staticClass:"filterOrganization"},[i("h4",{staticClass:"publicTitle"},[e._v("姓名:")]),e._v(" "),i("Input",{staticStyle:{left:"8px!important"},attrs:{placeholder:""},model:{value:e.teacherFilter.filterRequirement.name,callback:function(t){e.$set(e.teacherFilter.filterRequirement,"name",t)},expression:"teacherFilter.filterRequirement.name"}})],1),e._v(" "),i("div",{staticClass:"filterOrganization"},[i("h4",{staticClass:"publicTitle"},[e._v("工号:")]),e._v(" "),i("Input",{staticStyle:{left:"8px!important"},attrs:{placeholder:""},model:{value:e.teacherFilter.filterRequirement.jzgno,callback:function(t){e.$set(e.teacherFilter.filterRequirement,"jzgno",t)},expression:"teacherFilter.filterRequirement.jzgno"}})],1)]),e._v(" "),i("div",[i("Button",{staticClass:"selectionMchanism"},[e._v("查询")])],1)]),e._v(" "),i("div",{staticClass:"showTable"},[e.checkType?i("div",{class:["tableCheckboxData",{select:e.teacherFilter.selectAllChecked}],on:{click:e.handleCheckedAllResult}},[e._v("\n                选择全部查询结果\n              ")]):e._e(),e._v(" "),i("div",{staticClass:"tableFrameBorderRight"},[i("div",{staticClass:"tableListContent tableFrameBorderLeft tableInfoBoxSet",class:{hasDataAndPage:!!e.teacherFilter.dataList.length}},[i("div",{class:["tableSelectAllData",{tableSelectAllTrue:e.teacherFilter.selectAllTableChecked}],on:{click:e.teacherSelectAllClickFun}}),e._v(" "),i("Table",{attrs:{border:"",columns:e.teacherFilter.columns4,data:e.teacherFilter.dataList,stripe:e.stripe}})],1)])])]),e._v(" "),i("div",{staticClass:"rightChecked"},[i("div",{staticClass:"selectionMechanismList"},[i("h4",{staticClass:"selectionNumber"},[e._v("已选"),i("span",[e._v("("+e._s(e.selected.length)+")")])]),e._v(" "),i("span",{staticClass:"clearList",on:{click:e.handleClickClearList}},[e._v("清空列表")])]),e._v(" "),i("div",{staticClass:"rightCheckedUserList"},[i("ul",e._l(e.selected,function(t,s){return i("li",{staticClass:"selectedList"},[i("Tooltip",{attrs:{placement:"top"}},[i("span",{staticClass:"selectedListP"},[e._v(e._s(t.name))]),e._v(" "),i("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"listDel",on:{click:function(i){e.handleClickDelSelList(t,s)}}},[i("Icon",{attrs:{type:"close"}})],1)],1)}))])])])]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var p={data:function(){return{modelTitle:"查询教师",showModel:!1,selectedUser:[]}},components:{selectUser:i("VU/8")(d,u,!1,function(e){i("MR16")},"data-v-5af5de24",null).exports},methods:{handleClickModalAll:function(){this.showModel=!this.showModel},ok:function(e,t){if(!e.length)return t.close=!1,void this.$Message.info("请选择数据！");this.selectedUser=e},cancel:function(){}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{margin:"10px"}},[i("Button",{attrs:{type:"primary"},on:{click:e.handleClickModalAll}},[e._v("查询教师")]),e._v(" "),i("selectUser",{ref:"child",attrs:{checkType:!0,title:e.modelTitle},on:{ok:e.ok,cancel:e.cancel},model:{value:e.showModel,callback:function(t){e.showModel=t},expression:"showModel"}}),e._v(" "),e.selectedUser.length?i("div",{staticClass:"selectDateFrame"},e._l(e.selectedUser,function(t){return i("div",{staticClass:"selectDate"},[e._v("\r\n                    "+e._s(t)+"\r\n            ")])})):e._e()],1)},staticRenderFns:[]};var v=i("VU/8")(p,f,!1,function(e){i("bp/p")},"data-v-352ef3b0",null);t.default=v.exports},FwKZ:function(e,t){},MR16:function(e,t){},Zqhn:function(e,t){},"bp/p":function(e,t){},mvHQ:function(e,t,i){e.exports={default:i("qkKv"),__esModule:!0}},qkKv:function(e,t,i){var s=i("FeBl"),l=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}}});
//# sourceMappingURL=1.902bc25c8f151582c9fd.js.map